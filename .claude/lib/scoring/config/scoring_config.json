{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Directory Scoring Configuration",
  "description": "Configuration schema for directory activity scoring algorithm",
  "type": "object",
  "properties": {
    "thresholds": {
      "type": "object",
      "description": "Classification thresholds",
      "properties": {
        "active": {
          "type": "number",
          "description": "Minimum score for 'Active' classification",
          "default": 20,
          "minimum": 0
        },
        "borderline": {
          "type": "number",
          "description": "Minimum score for 'Borderline' classification",
          "default": 0
        }
      },
      "required": ["active", "borderline"]
    },
    "weights": {
      "type": "object",
      "description": "Factor weights for scoring calculation",
      "properties": {
        "time_decay": {
          "type": "number",
          "description": "Weight for time-based decay factor",
          "default": 1.0,
          "minimum": 0
        },
        "git_activity": {
          "type": "number",
          "description": "Weight for git repository activity",
          "default": 2.0,
          "minimum": 0
        },
        "dependencies": {
          "type": "number",
          "description": "Weight for dependency management files",
          "default": 1.5,
          "minimum": 0
        },
        "documentation": {
          "type": "number",
          "description": "Weight for documentation presence",
          "default": 1.0,
          "minimum": 0
        },
        "file_activity": {
          "type": "number",
          "description": "Weight for file count and variety",
          "default": 1.2,
          "minimum": 0
        },
        "project_structure": {
          "type": "number",
          "description": "Weight for project organization",
          "default": 0.8,
          "minimum": 0
        }
      },
      "required": [
        "time_decay",
        "git_activity",
        "dependencies",
        "documentation",
        "file_activity",
        "project_structure"
      ]
    },
    "protected_paths": {
      "type": "array",
      "description": "Directory names that should never be archivable",
      "items": {
        "type": "string"
      },
      "default": [
        ".git",
        ".claude",
        "node_modules",
        ".venv",
        "venv",
        "__pycache__",
        "dist",
        "build",
        ".next",
        ".nuxt"
      ]
    },
    "critical_files": {
      "type": "array",
      "description": "Files that indicate important directories",
      "items": {
        "type": "string"
      },
      "default": [
        "package.json",
        "requirements.txt",
        "Cargo.toml",
        "go.mod",
        "pom.xml",
        "Gemfile",
        ".git",
        "Makefile",
        "CMakeLists.txt"
      ]
    },
    "project_indicators": {
      "type": "object",
      "description": "Files that indicate specific project types",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "default": {
        "node": ["package.json", "node_modules", "yarn.lock", "package-lock.json"],
        "python": ["requirements.txt", "setup.py", "pyproject.toml", "Pipfile"],
        "rust": ["Cargo.toml", "Cargo.lock"],
        "go": ["go.mod", "go.sum"],
        "java": ["pom.xml", "build.gradle", "gradle.properties"],
        "ruby": ["Gemfile", "Gemfile.lock"],
        "php": ["composer.json", "composer.lock"],
        "git": [".git"]
      }
    },
    "time_decay": {
      "type": "object",
      "description": "Time-based decay scoring parameters",
      "properties": {
        "recent_days": {
          "type": "number",
          "description": "Days threshold for 'recent' classification",
          "default": 7,
          "minimum": 1
        },
        "active_days": {
          "type": "number",
          "description": "Days threshold for 'active' classification",
          "default": 30,
          "minimum": 1
        },
        "borderline_days": {
          "type": "number",
          "description": "Days threshold for 'borderline' classification",
          "default": 90,
          "minimum": 1
        },
        "recent_score": {
          "type": "number",
          "description": "Score for directories modified within recent_days",
          "default": 10,
          "minimum": 0
        },
        "max_penalty": {
          "type": "number",
          "description": "Maximum negative score for very old directories",
          "default": -5
        }
      }
    },
    "git_scoring": {
      "type": "object",
      "description": "Git activity scoring parameters",
      "properties": {
        "base_score": {
          "type": "number",
          "description": "Base score for having a git repository",
          "default": 5,
          "minimum": 0
        },
        "commit_lookback_days": {
          "type": "number",
          "description": "Days to look back for recent commits",
          "default": 30,
          "minimum": 1
        },
        "commit_score_multiplier": {
          "type": "number",
          "description": "Score multiplier per commit",
          "default": 1.5,
          "minimum": 0
        },
        "max_commit_score": {
          "type": "number",
          "description": "Maximum score from commits",
          "default": 15,
          "minimum": 0
        },
        "multiple_branches_bonus": {
          "type": "number",
          "description": "Bonus score for having multiple branches",
          "default": 5,
          "minimum": 0
        },
        "uncommitted_changes_bonus": {
          "type": "number",
          "description": "Bonus score for having uncommitted changes",
          "default": 10,
          "minimum": 0
        },
        "command_timeout": {
          "type": "number",
          "description": "Timeout for git commands in seconds",
          "default": 5,
          "minimum": 1
        }
      }
    },
    "performance": {
      "type": "object",
      "description": "Performance tuning parameters",
      "properties": {
        "max_files_to_check": {
          "type": "number",
          "description": "Maximum number of files to check for timestamps",
          "default": 50,
          "minimum": 1
        },
        "files_per_directory": {
          "type": "number",
          "description": "Maximum files to check per directory",
          "default": 10,
          "minimum": 1
        }
      }
    }
  },
  "required": ["thresholds", "weights"]
}
